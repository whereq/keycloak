{"version":3,"file":"Main.js","names":["React","ReactDOM","HashRouter","App","flattenContent","initGroupAndItemIds","isExpansion","isModulePageDef","KeycloakService","KeycloakContext","AccountServiceClient","AccountServiceContext","Main","Component","constructor","props","componentDidMount","isReactLoading","toggleReact","render","keycloakService","keycloak","createElement","Provider","value","e","removeHidden","items","visible","item","hidden","eval","push","content","length","pop","loadModule","modulePage","Promise","resolve","reject","console","log","resourceUrl","modulePath","then","module","catch","error","warn","label","message","moduleLoaders","forEach","all","domContainer","document","querySelector"],"sources":["../src/app/Main.tsx"],"sourcesContent":["/*\r\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nimport {HashRouter} from 'react-router-dom';\r\n\r\nimport {App} from './App';\r\nimport {ContentItem, ModulePageDef, flattenContent, initGroupAndItemIds, isExpansion, isModulePageDef} from './ContentPages';\r\n\r\nimport { KeycloakClient, KeycloakService } from './keycloak-service/keycloak.service';\r\nimport { KeycloakContext } from './keycloak-service/KeycloakContext';\r\nimport { AccountServiceClient } from './account-service/account.service';\r\nimport { AccountServiceContext } from './account-service/AccountServiceContext';\r\n\r\ndeclare const keycloak: KeycloakClient;\r\n\r\ndeclare let isReactLoading: boolean;\r\ndeclare function toggleReact(): void;\r\ndeclare const features: { [key: string]: boolean; };\r\n\r\nexport interface MainProps {}\r\nexport class Main extends React.Component<MainProps> {\r\n\r\n    public constructor(props: MainProps) {\r\n        super(props);\r\n    }\r\n\r\n    public componentDidMount(): void {\r\n        isReactLoading = false;\r\n        toggleReact();\r\n    }\r\n\r\n    public render(): React.ReactNode {\r\n        const keycloakService = new KeycloakService(keycloak);\r\n        return (\r\n            <HashRouter>\r\n                <KeycloakContext.Provider value={keycloakService}>\r\n                    <AccountServiceContext.Provider value={new AccountServiceClient(keycloakService)}>\r\n                        <App/>\r\n                    </AccountServiceContext.Provider>\r\n                </KeycloakContext.Provider>\r\n            </HashRouter>\r\n        );\r\n    }\r\n};\r\n\r\ndeclare const resourceUrl: string;\r\ndeclare let content: ContentItem[];\r\nconst e = React.createElement;\r\n\r\nfunction removeHidden(items: ContentItem[]): ContentItem[] {\r\n    const visible: ContentItem[] = [];\r\n\r\n    for (let item of items) {\r\n        if (item.hidden && eval(item.hidden)) continue;\r\n\r\n        if (isExpansion(item)) {\r\n            visible.push(item);\r\n            item.content = removeHidden(item.content);\r\n            if (item.content.length === 0) {\r\n                visible.pop(); // remove empty expansion\r\n            }\r\n        } else {\r\n            visible.push(item);\r\n        }\r\n    }\r\n\r\n    return visible;\r\n}\r\n\r\ncontent = removeHidden(content);\r\ninitGroupAndItemIds();\r\n\r\nfunction loadModule(modulePage: ModulePageDef): Promise<ModulePageDef> {\r\n    return new Promise ((resolve, reject) => {\r\n        console.log('loading: ' + resourceUrl + modulePage.modulePath);\r\n        import(resourceUrl + modulePage.modulePath).then( (module: React.Component) => {\r\n            modulePage.module = module;\r\n            resolve(modulePage);\r\n        }).catch((error: Error) => {\r\n            console.warn('Unable to load ' + modulePage.label + ' because ' + error.message);\r\n            reject(modulePage);\r\n        });\r\n    });\r\n};\r\n\r\nconst moduleLoaders: Promise<ModulePageDef>[] = [];\r\nflattenContent(content).forEach((item: ContentItem) => {\r\n    if (isModulePageDef(item)) {\r\n        moduleLoaders.push(loadModule(item));\r\n    }\r\n});\r\n\r\n// load content modules and start\r\nPromise.all(moduleLoaders).then(() => {\r\n    const domContainer = document.querySelector('#main_react_container');\r\n    ReactDOM.render(e(Main), domContainer);\r\n});\r\n"],"mappings":"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"}