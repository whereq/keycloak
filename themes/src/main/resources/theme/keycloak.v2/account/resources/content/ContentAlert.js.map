{"version":3,"file":"ContentAlert.js","names":["React","Alert","AlertActionCloseButton","AlertGroup","AlertVariant","Msg","ContentAlert","Component","constructor","props","_defineProperty","key","setState","alerts","state","filter","el","Date","getTime","variant","message","params","getUniqueId","push","localize","danger","setTimeout","hideAlert","instance","success","postAlert","warning","info","render","createElement","isToast","map","isLiveRegion","title","actionClose","variantLabel","onClose","_class"],"sources":["../../src/app/content/ContentAlert.tsx"],"sourcesContent":["/*\r\n * Copyright 2019 Red Hat, Inc. and/or its affiliates.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { Alert, AlertActionCloseButton, AlertGroup, AlertVariant } from '@patternfly/react-core';\r\nimport { Msg } from '../widgets/Msg';\r\n\r\ninterface ContentAlertProps { }\r\n\r\ninterface ContentAlertState {\r\n    alerts: {\r\n        key: number;\r\n        message: string;\r\n        variant: AlertVariant;\r\n    }[];\r\n}\r\nexport class ContentAlert extends React.Component<ContentAlertProps, ContentAlertState> {\r\n    private static instance: ContentAlert;\r\n\r\n    private constructor(props: ContentAlertProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            alerts: []\r\n        };\r\n        ContentAlert.instance = this;\r\n    }\r\n\r\n    /**\r\n     * @param message A literal text message or localization key.\r\n     */\r\n    public static success(message: string, params?: string[]): void {\r\n        ContentAlert.instance.postAlert(AlertVariant.success, message, params);\r\n    }\r\n\r\n    /**\r\n     * @param message A literal text message or localization key.\r\n     */\r\n    public static danger(message: string, params?: string[]): void {\r\n        ContentAlert.instance.postAlert(AlertVariant.danger, message, params);\r\n    }\r\n\r\n    /**\r\n     * @param message A literal text message or localization key.\r\n     */\r\n    public static warning(message: string, params?: string[]): void {\r\n        ContentAlert.instance.postAlert(AlertVariant.warning, message, params);\r\n    }\r\n\r\n    /**\r\n     * @param message A literal text message or localization key.\r\n     */\r\n    public static info(message: string, params?: string[]): void {\r\n        ContentAlert.instance.postAlert(AlertVariant.info, message, params);\r\n    }\r\n\r\n    private hideAlert = (key: number) => {\r\n        this.setState({ alerts: [...this.state.alerts.filter(el => el.key !== key)] });\r\n    }\r\n\r\n    private getUniqueId = () => (new Date().getTime());\r\n\r\n    private postAlert = (variant: AlertVariant, message: string, params?: string[]) => {\r\n        const alerts = this.state.alerts;\r\n        const key = this.getUniqueId();\r\n        alerts.push({\r\n            key,\r\n            message: Msg.localize(message, params),\r\n            variant\r\n        });\r\n        this.setState({ alerts });\r\n\r\n        if (variant !== AlertVariant.danger) {\r\n            setTimeout(() => this.hideAlert(key), 8000);\r\n        }\r\n    }\r\n\r\n    public render(): React.ReactNode {\r\n        return (\r\n            <AlertGroup isToast aria-live=\"assertive\">\r\n                {this.state.alerts.map(({ key, variant, message }) => (\r\n                    <Alert\r\n                        aria-details={message}\r\n                        isLiveRegion\r\n                        variant={variant}\r\n                        title={message}\r\n                        actionClose={\r\n                            <AlertActionCloseButton\r\n                                title={message}\r\n                                variantLabel={`${variant} alert`}\r\n                                onClose={() => this.hideAlert(key)}\r\n                            />\r\n                        }\r\n                        key={key} />\r\n                ))}\r\n            </AlertGroup>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"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"}