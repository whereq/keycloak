{"version":3,"file":"DeviceActivityPage.js","names":["React","AccountServiceContext","TimeUtil","Button","DataList","DataListItem","DataListItemRow","DataListContent","DescriptionList","DescriptionListTerm","DescriptionListDescription","DescriptionListGroup","Grid","GridItem","Label","PageSection","PageSectionVariants","Title","Tooltip","SplitItem","Split","DesktopIcon","MobileAltIcon","SyncAltIcon","Msg","ContinueCancelModal","KeycloakContext","ContentPage","ContentAlert","DeviceActivityPage","Component","constructor","props","context","_defineProperty","keycloakService","doDelete","then","logout","device","session","encodeURIComponent","id","fetchDevices","success","browser","os","state","devices","doGet","response","console","log","moveCurrentToTop","data","setState","currentDevice","forEach","index","current","splice","unshift","sessions","currentSession","time","format","elementId","item","element","substring","findDeviceTypeIcon","deviceType","mobile","createElement","findOS","toLowerCase","includes","localize","findOSVersion","osVersion","makeClientsString","clients","clientsString","client","clientName","hasOwnProperty","undefined","clientId","length","isShowSignOutAll","render","title","introMessage","isFilled","variant","light","hasGutter","className","headingLevel","size","msgKey","content","onClick","bind","icon","Consumer","keycloak","buttonTitle","buttonId","modalTitle","modalMessage","onContinue","signOutAll","map","deviceIndex","Fragment","sessionIndex","key","isHidden","span","rowSpan","sm","md","color","buttonVariant","signOutSession","columnModifier","lg","ipAddress","lastAccess","started","expires"],"sources":["../../../src/app/content/device-activity-page/DeviceActivityPage.tsx"],"sourcesContent":["/*\r\n * Copyright 2018 Red Hat, Inc. and/or its affiliates.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *      http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n\r\nimport * as React from 'react';\r\n\r\nimport {HttpResponse} from '../../account-service/account.service';\r\nimport { AccountServiceContext } from '../../account-service/AccountServiceContext';\r\nimport TimeUtil from '../../util/TimeUtil';\r\n\r\nimport {\r\n  Button,\r\n  DataList,\r\n  DataListItem,\r\n  DataListItemRow,\r\n  DataListContent,\r\n  DescriptionList,\r\n  DescriptionListTerm,\r\n  DescriptionListDescription,\r\n  DescriptionListGroup,\r\n  Grid,\r\n  GridItem,\r\n  Label,\r\n  PageSection,\r\n  PageSectionVariants,\r\n  Title,\r\n  Tooltip,\r\n  SplitItem,\r\n  Split\r\n} from '@patternfly/react-core';\r\n\r\nimport {\r\n        DesktopIcon,\r\n        MobileAltIcon,\r\n        SyncAltIcon,\r\n} from '@patternfly/react-icons';\r\n\r\nimport {Msg} from '../../widgets/Msg';\r\nimport {ContinueCancelModal} from '../../widgets/ContinueCancelModal';\r\nimport { KeycloakService } from '../../keycloak-service/keycloak.service';\r\nimport { KeycloakContext } from '../../keycloak-service/KeycloakContext';\r\n\r\nimport {ContentPage} from '../ContentPage';\r\nimport { ContentAlert } from '../ContentAlert';\r\n\r\nexport interface DeviceActivityPageProps {\r\n}\r\n\r\nexport interface DeviceActivityPageState {\r\n  devices: Device[];\r\n}\r\n\r\ninterface Device {\r\n  browser: string;\r\n  current: boolean;\r\n  device: string;\r\n  ipAddress: string;\r\n  lastAccess: number;\r\n  mobile: boolean;\r\n  os: string;\r\n  osVersion: string;\r\n  sessions: Session[];\r\n}\r\n\r\ninterface Session {\r\n  browser: string;\r\n  current: boolean;\r\n  clients: Client[];\r\n  expires: number;\r\n  id: string;\r\n  ipAddress: string;\r\n  lastAccess: number;\r\n  started: number;\r\n}\r\n\r\ninterface Client {\r\n  clientId: string;\r\n  clientName: string;\r\n}\r\n\r\n/**\r\n * @author Stan Silvert ssilvert@redhat.com (C) 2019 Red Hat Inc.\r\n */\r\nexport class DeviceActivityPage extends React.Component<DeviceActivityPageProps, DeviceActivityPageState> {\r\n    static contextType = AccountServiceContext;\r\n    context: React.ContextType<typeof AccountServiceContext>;\r\n\r\n    public constructor(props: DeviceActivityPageProps, context: React.ContextType<typeof AccountServiceContext>) {\r\n        super(props);\r\n        this.context = context;\r\n\r\n        this.state = {\r\n          devices: []\r\n        };\r\n\r\n        this.fetchDevices();\r\n    }\r\n\r\n    private signOutAll = (keycloakService: KeycloakService) => {\r\n      this.context!.doDelete(\"/sessions\")\r\n        .then( () => {\r\n          keycloakService.logout();\r\n        });\r\n    }\r\n\r\n    private signOutSession = (device: Device, session: Session) => {\r\n      this.context!.doDelete(\"/sessions/\" + encodeURIComponent(session.id))\r\n          .then (() => {\r\n            this.fetchDevices();\r\n            ContentAlert.success('signedOutSession', [session.browser, device.os]);\r\n          });\r\n    }\r\n\r\n    private fetchDevices(): void {\r\n      this.context!.doGet<Device[]>(\"/sessions/devices\")\r\n          .then((response: HttpResponse<Device[]>) => {\r\n            console.log({response});\r\n\r\n            let devices: Device[] = this.moveCurrentToTop(response.data as Device[]);\r\n\r\n            this.setState({\r\n              devices: devices\r\n            });\r\n\r\n          });\r\n    }\r\n\r\n    // current device and session should display at the top of their respective lists\r\n    private moveCurrentToTop(devices: Device[]): Device[] {\r\n      let currentDevice: Device = devices[0];\r\n\r\n      devices.forEach((device: Device, index: number) => {\r\n        if (device.current) {\r\n          currentDevice = device;\r\n          devices.splice(index, 1);\r\n          devices.unshift(device);\r\n        }\r\n      });\r\n\r\n      currentDevice.sessions.forEach((session: Session, index: number) => {\r\n        if (session.current) {\r\n          const currentSession: Session[] = currentDevice.sessions.splice(index, 1);\r\n          currentDevice.sessions.unshift(currentSession[0]);\r\n        }\r\n      });\r\n\r\n      return devices;\r\n    }\r\n\r\n    private time(time: number): string {\r\n      return TimeUtil.format(time * 1000);\r\n    }\r\n\r\n    private elementId(item: string, session: Session, element: string='session'): string {\r\n        return `${element}-${session.id.substring(0,7)}-${item}`;\r\n    }\r\n\r\n    private findDeviceTypeIcon(session: Session, device: Device): React.ReactNode {\r\n      const deviceType: boolean = device.mobile;\r\n      if (deviceType === true) return (<MobileAltIcon id={this.elementId('icon-mobile', session, 'device')} />);\r\n\r\n      return (<DesktopIcon id={this.elementId('icon-desktop', session, 'device')} />);\r\n    }\r\n\r\n    private findOS(device: Device): string {\r\n      if (device.os.toLowerCase().includes('unknown')) return Msg.localize('unknownOperatingSystem');\r\n\r\n      return device.os;\r\n    }\r\n\r\n    private findOSVersion(device: Device): string {\r\n      if (device.osVersion.toLowerCase().includes('unknown')) return '';\r\n\r\n      return device.osVersion;\r\n    }\r\n\r\n    private makeClientsString(clients: Client[]): string {\r\n      let clientsString = \"\";\r\n      clients.forEach( (client: Client, index: number) => {\r\n        let clientName: string;\r\n        if (client.hasOwnProperty('clientName') && (client.clientName !== undefined) && (client.clientName !== '')) {\r\n          clientName = Msg.localize(client.clientName);\r\n        } else {\r\n          clientName = client.clientId;\r\n        }\r\n\r\n        clientsString += clientName;\r\n\r\n        if (clients.length > index + 1) clientsString += ', ';\r\n      })\r\n\r\n      return clientsString;\r\n    }\r\n\r\n    private isShowSignOutAll(devices: Device[]): boolean {\r\n      if (devices.length === 0) return false;\r\n      if (devices.length > 1) return true;\r\n      if (devices[0].sessions.length > 1) return true;\r\n\r\n      return false;\r\n    }\r\n\r\n    public render(): React.ReactNode {\r\n\r\n      return (\r\n          <ContentPage \r\n            title=\"device-activity\" \r\n            introMessage=\"signedInDevicesExplanation\" \r\n          >\r\n            <PageSection isFilled variant={PageSectionVariants.light}>\r\n            <Split hasGutter className=\"pf-u-mb-lg\">\r\n              <SplitItem isFilled>\r\n                <div id=\"signedInDevicesTitle\" className=\"pf-c-content\"><Title headingLevel=\"h2\" size=\"xl\"><Msg msgKey=\"signedInDevices\"/></Title></div>\r\n              </SplitItem>\r\n              <SplitItem>\r\n                <Tooltip content={<Msg msgKey=\"refreshPage\" />}>\r\n                  <Button\r\n                    aria-describedby=\"refresh page\"\r\n                    id=\"refresh-page\"\r\n                    variant=\"link\"\r\n                    onClick={this.fetchDevices.bind(this)}\r\n                    icon={<SyncAltIcon />}\r\n                  >\r\n                    <Msg msgKey=\"refresh\"/>\r\n                  </Button>\r\n                </Tooltip>\r\n              </SplitItem>\r\n              <SplitItem>\r\n              <KeycloakContext.Consumer>\r\n                { (keycloak) => (\r\n                    this.isShowSignOutAll(this.state.devices) &&\r\n                      <ContinueCancelModal buttonTitle='signOutAllDevices'\r\n                                    buttonId='sign-out-all'\r\n                                    modalTitle='signOutAllDevices'\r\n                                    modalMessage='signOutAllDevicesWarning'\r\n                                    onContinue={() => this.signOutAll(keycloak!)}\r\n                      />\r\n                )}\r\n              </KeycloakContext.Consumer>\r\n              </SplitItem>\r\n            </Split>\r\n            <DataList className=\"signed-in-device-list\" aria-label={Msg.localize('signedInDevices')}>\r\n              <DataListItem aria-labelledby='sessions' id='device-activity-sessions'>\r\n                {this.state.devices.map((device: Device, deviceIndex: number) => {\r\n                  return (\r\n                    <React.Fragment>\r\n                      {device.sessions.map((session: Session, sessionIndex: number) => {\r\n                        return (\r\n                          <React.Fragment key={'device-' + deviceIndex + '-session-' + sessionIndex}>\r\n                            <DataListItemRow>\r\n                              <DataListContent aria-label=\"device-sessions-content\" isHidden={false} className=\"pf-u-flex-grow-1\">\r\n                                <Grid id={this.elementId(\"item\",session)} className=\"signed-in-device-grid\" hasGutter>\r\n                                  <GridItem className=\"device-icon\" span={1} rowSpan={2}>\r\n                                    <span>{this.findDeviceTypeIcon(session, device)}</span>\r\n                                  </GridItem>\r\n                                  <GridItem sm={8} md={9} span={10}>\r\n                                    <span id={this.elementId('browser', session)} className=\"pf-u-mr-md session-title\">{this.findOS(device)} {this.findOSVersion(device)} / {session.browser}</span>\r\n                                    {session.current &&\r\n                                      <Label color=\"green\" id={this.elementId('current-badge', session)}><Msg msgKey=\"currentSession\" /></Label>}\r\n                                  </GridItem>\r\n                                  <GridItem className=\"pf-u-text-align-right\" sm={3} md={2} span={1}>\r\n                                    {!session.current &&\r\n                                      <ContinueCancelModal buttonTitle='doSignOut'\r\n                                        buttonId={this.elementId('sign-out', session)}\r\n                                        modalTitle='doSignOut'\r\n                                        buttonVariant='secondary'\r\n                                        modalMessage='signOutWarning'\r\n                                        onContinue={() => this.signOutSession(device, session)}\r\n                                      />\r\n                                    }\r\n                                  </GridItem>\r\n                                  <GridItem span={11}>\r\n                                    <DescriptionList columnModifier={{ sm: '2Col', lg: '3Col' }}>\r\n                                      <DescriptionListGroup>\r\n                                        <DescriptionListTerm>{Msg.localize('ipAddress')}</DescriptionListTerm>\r\n                                          <DescriptionListDescription id={this.elementId('ip', session)}>{session.ipAddress}</DescriptionListDescription>\r\n                                      </DescriptionListGroup>\r\n                                      <DescriptionListGroup>\r\n                                          <DescriptionListTerm>{Msg.localize('lastAccessedOn')}</DescriptionListTerm>\r\n                                          <DescriptionListDescription id={this.elementId('last-access', session)}>{this.time(session.lastAccess)}</DescriptionListDescription>\r\n                                      </DescriptionListGroup>\r\n                                      <DescriptionListGroup>\r\n                                          <DescriptionListTerm>{Msg.localize('clients')}</DescriptionListTerm>\r\n                                          <DescriptionListDescription id={this.elementId('clients', session)}>{this.makeClientsString(session.clients)}</DescriptionListDescription>\r\n                                      </DescriptionListGroup>\r\n                                      <DescriptionListGroup>\r\n                                        <DescriptionListTerm>{Msg.localize('started')}</DescriptionListTerm>\r\n                                        <DescriptionListDescription id={this.elementId('started', session)}>{this.time(session.started)}</DescriptionListDescription>\r\n                                      </DescriptionListGroup>\r\n                                      <DescriptionListGroup>\r\n                                        <DescriptionListTerm>{Msg.localize('expires')}</DescriptionListTerm>\r\n                                        <DescriptionListDescription id={this.elementId('expires', session)}>{this.time(session.expires)}</DescriptionListDescription>\r\n                                      </DescriptionListGroup>\r\n                                    </DescriptionList>\r\n                                  </GridItem>\r\n                                </Grid>\r\n                              </DataListContent>\r\n                            </DataListItemRow>\r\n                          </React.Fragment>\r\n                        );\r\n                      })}\r\n                    </React.Fragment>\r\n                  )\r\n                })}\r\n              </DataListItem>\r\n            </DataList>\r\n          </PageSection>\r\n        </ContentPage>\r\n      );\r\n    }\r\n};\r\n"],"mappings":"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"}